<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="listAttendantsApp">
<head>
    <title>Fittizia</title>
    <link href="../stylesheets/bootstrap.min.css" rel="stylesheet" />
    <link href="../stylesheets/style.css" rel="stylesheet" />
    <script src="../javascripts/lib/angular.min.js"></script>
    <script src="../javascripts/listAttendants.js"></script>
</head>
<body ng-controller="listAttendantsController">
    <div class="header">
        <div class="logo">
            <img src="/images/logo.png" />
        </div>
        <div class="login">
            <a href="#">Login </a>
        </div>
    </div>
    <nav class="navbar navbar-default">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#">Fittizia</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li><a href="../index.html">Home <span class="sr-only">(current)</span></a></li>
                    <li><a href="courses.html">Corsi</a></li>
                </ul>
            </div><!-- /.navbar-collapse -->
        </div><!-- /.container-fluid -->
    </nav>
    <div class="content">

                <div ng-repeat="data in listOfAttendants">
        	<div ng-repeat="(key, courses) in data">
        		<h2>{{key}}</h2>
        		<h3>Numero totale partecipanti: {{courses.count}}</h3>
		         <ul ng-repeat="course in courses.data">
		            <li>
		            <form method="POST" action="/api/attendants">
			                <div class="list-group" style="display:inline-flex">
			                    <div class="list-group-item">
			                        <h4 class="list-group-item-heading">Nome:</h4>
			                        <p class="list-group-item-text">{{course.first_name}}</p>
			                    </div>
			                    <div class="list-group-item">
			                        <h4 class="list-group-item-heading">Cognome:</h4>
			                        <p class="list-group-item-text">{{course.last_name}}</p>
			                    </div>
			                    <div class="list-group-item">
			                        <h4 class="list-group-item-heading">Email:</h4>
			                        <p class="list-group-item-text">{{course.email}}</p>
			                    </div>
			                    <div class="list-group-item">
			                        <h4 class="list-group-item-heading">Num partecipanti:</h4>
			                        <p class="list-group-item-text">{{course.num_attendants}}</p>
			                    </div>
			                </div>
							<div class="list-group-item">
								 <select ng-model="incorrectlySelected"
						                ng-options="opt as opt.label for opt in courseList">
						           </select>
						           <input type="hidden" name="CMD" value="edit" />
						           	<input type="hidden" name="first_name" value="{{course.first_name}}" />
						           	<input type="hidden" name="last_name" value="{{course.last_name}}" />
						           	<input type="hidden" name="email" value="{{course.email}}" />
						           	<input type="hidden" name="course_id" value="{{key}}" />
						           	<input type="hidden" name="newCourseId" value="{{incorrectlySelected.value}}" />
						           <button type="submit">Sposta</button>
							</div>
						</form>
		            </li>
		        </ul>
	        </div>
        </div>

    </div>
    <div class="footer">
        <span class="important">Fittizia Srl </span>- Via Lanzoni 13, 27010, Giussago (PV) - Italia <br />
        Telefono <span class="important">0382 23456778</span> <br />
        Partita IVA: <span class="important">IT033868135678868 </span><br />
        Contattaci a <span class="important"><a href="mailto:informazioni@fittizia.it">info.fittizia@gmail.com</a></span>
    </div>
</body>
</html>

